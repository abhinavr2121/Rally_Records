<!DOCTYPE html>
<html>
	<head>
		<script src='https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js'></script>
	</head>
	<body>
		<a href='/'>Back</a>
		<h1>{{name1}} || {{name2}}</h1>
		<h2>{{p1 | length}} || {{p2 | length}}</h2>
		<canvas id="surface"></canvas>
		<canvas id="time_wins"></canvas>
		<table>
			<th>
				<tr>
					<td>Tournament</td>
					<td>Date</td>
					<td>Match</td>
					<td>Surface</td>
					<td>Court</td>
					<td>Score</td>
				</tr>
			</th>
			<tbody>
				{% for index, doc in data.iterrows():%}
				<tr>
					<td>{{doc['Location']}}<br>({{doc['Series']}})</td>
					<td>{{doc['Date']}}</td>
					<td>{{doc['Winner']}}  {{doc['WRank']}}<br>{{doc['Loser']}}  {{doc['LRank']}} {% if doc['Comment'] == 'Retired'%} (Ret.) {% endif %}</td>
					<td>{{doc['Surface']}}</td>
					<td>{{doc['Court']}}</td>
					<td>{{doc['W1']}}  {{doc['W2']}}  {{doc['W3']}}<br>{{doc['L1']}}  {{doc['L2']}}  {{doc['L3']}}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</body>

	<script>
		var ctx1 = document.getElementById('surface').getContext('2d');
		var ctx2 = document.getElementById('time_wins').getContext('2d');
		const chart1 = new Chart(ctx1, {
			type: 'bar',
			data: 
			{
				labels: ['Hard', 'Clay', 'Grass', 'Carpet'],
			  	datasets: [{
			  		label: '{{name1.upper()}}',
			    	data: [
			    		{%if p1[p1['Surface'] == 'Hard'] | length > 0 %}
			    			{{p1[p1['Surface'] == 'Hard']  | length}},
			    		{%endif%}
			    		{%if p1[p1['Surface'] == 'Clay'] | length > 0 %}
			    			{{p1[p1['Surface'] == 'Clay']  | length}},
			    		{%endif%}
			    		{%if p1[p1['Surface'] == 'Grass'] | length > 0 %}
			    			{{p1[p1['Surface'] == 'Grass'] | length}},
			    		{%endif%}
			    		{%if p1[p1['Surface'] == 'Carpet'] | length > 0 %}
			    			{{p1[p1['Surface'] == 'Carpet'] | length}},
			    		{%endif%}
			    		],
			    	borderWidth: 1,
			    	backgroundColor: 'red'
				},
				{
					label: '{{name2.upper()}}',
			        data: [
			        	{%if p2[p2['Surface'] == 'Hard'] | length > 0 %}
			    			{{p2[p2['Surface'] == 'Hard']  | length}},
			    		{%endif%}
			    		{%if p2[p2['Surface'] == 'Clay'] | length > 0 %}
			    			{{p2[p2['Surface'] == 'Clay']  | length}},
			    		{%endif%}
			    		{%if p2[p2['Surface'] == 'Grass'] | length > 0 %}
			    			{{p2[p2['Surface'] == 'Grass'] | length}},
			    		{%endif%}
			    		{%if p2[p2['Surface'] == 'Carpet'] | length > 0 %}
			    			{{p2[p2['Surface'] == 'Carpet'] | length}},
			    		{%endif%}
			        ],
			        borderWidth: 1,
			        backgroundColor: 'green'
			    }]
			},
			options: {
				responsive: true,
				scales: {
			    	yAxes: [{
			    		ticks: {
			        		beginAtZero: true
			        	}
			      	}]
			    }
			}
		});

		const chart2 = new Chart(ctx2, {
			type: 'line',
			data: 
			{
				labels: ['2005', '2006', '2007', '2008', '2009', '2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021'],
			  	datasets: [{
			  		label: '{{name1.upper()}}',
			    	data: [
			    		{%if p1[p1['Date'].str[-4:] == '2005'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2005']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2006'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2006']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2007'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2007']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2008'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2008']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2009'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2009']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2010'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2010']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2011'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2011']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2012'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2012']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2013'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2013']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2014'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2014']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2015'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2015']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2016'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2016']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2017'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2017']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2018'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2018']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2019'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2019']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2020'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2020']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p1[p1['Date'].str[-4:] == '2021'] | length > 0 %}
			    			{{p1[p1['Date'].str[-4:] == '2021']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		],
			    	borderWidth: 1,
			    	backgroundColor: 'red',
			    	borderColor: 'red',
			    	lineTension: 0,
			    	fill: false,
				},
					{
			  		label: '{{name2.upper()}}',
			    	data: [
			    		{%if p2[p2['Date'].str[-4:] == '2005'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2005']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2006'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2006']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2007'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2007']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2008'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2008']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2009'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2009']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2010'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2010']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2011'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2011']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2012'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2012']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2013'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2013']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2014'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2014']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2015'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2015']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2016'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2016']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2017'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2017']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2018'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2018']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2019'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2019']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2020'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2020']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		{%if p2[p2['Date'].str[-4:] == '2021'] | length > 0 %}
			    			{{p2[p2['Date'].str[-4:] == '2021']  | length}},
			    		{%else%}
			    			0,
			    		{%endif%}
			    		],
			    	borderWidth: 1,
			    	backgroundColor: 'green',
			    	borderColor: 'green',
			    	lineTension: 0,
			    	fill: false,
				},
				],
			},
			options: {
				responsive: true,
				scales: {
			    	yAxes: [{
			    		ticks: {
			        		beginAtZero: true
			        	}
			      	}]
			    }
			}
		});
	</script>
</html>